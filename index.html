<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Marriage Proposal Form</title>
</head>
<body>

  <h1>üíç Make a Proposal üíç</h1>

  <form id="proposalForm">
    <div class="row">
      <div>
        <label for="wname">Wife's Name:</label>
        <input type="text" id="wname" name="wname" placeholder="Enter wife's name" required>
      </div>
      <div>
        <label for="wemail">Wife's Email:</label>
        <input type="email" id="wemail" name="wemail" placeholder="Enter wife's email" required>
      </div>
    </div>

    <div class="row">
      <div>
        <label for="hname">Husband's Name:</label>
        <input type="text" id="hname" name="hname" placeholder="Enter husband's name" required>
      </div>
      <div>
        <label for="hemail">Husband's Email:</label>
        <input type="email" id="hemail" name="hemail" placeholder="Enter husband's email" required>
      </div>
    </div>

    <!-- Calendar Picker -->
    <div class="container">
      <label class="label" for="date">Choose a date</label>
      <div class="calendar">
        <div id="dateInput" class="date-input" tabindex="0" aria-haspopup="dialog" aria-expanded="false">
          <span id="dateText">Select date</span>
          <span aria-hidden="true">‚ñæ</span>
        </div>

        <div id="picker" class="popup" role="dialog" aria-modal="false">
          <div class="header">
            <div class="month-year" id="monthYear">Month Year</div>
            <div class="nav">
              <button type="button" id="prevMonth">‚óÄ</button>
              <button type="button" id="nextMonth">‚ñ∂</button>
            </div>
          </div>
          <div class="weekdays">
            <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
          </div>
          <div class="days" id="daysGrid"></div>
          <div class="footer">
            <button type="button" id="clearBtn">Clear</button>
            <div>
              <button type="button" id="closeBtn">Close</button>
              <button type="button" id="todayBtn">Today</button>
            </div>
          </div>
        </div>
      </div>
      <p style="margin-top:10px;color:#666">Selected Date of Certification: <code id="isoOut">none</code></p>
    </div>

    <center style="margin-top:20px;">
      <button type="button" class="btn" onclick="window.location.href='page1.html'">Next &gt;</button>
    </center> 
  </form>

  <script>
    (function(){
      const dateInput = document.getElementById('dateInput');
      const picker = document.getElementById('picker');
      const daysGrid = document.getElementById('daysGrid');
      const monthYear = document.getElementById('monthYear');
      const dateText = document.getElementById('dateText');
      const isoOut = document.getElementById('isoOut');

      const prevBtn = document.getElementById('prevMonth');
      const nextBtn = document.getElementById('nextMonth');
      const closeBtn = document.getElementById('closeBtn');
      const clearBtn = document.getElementById('clearBtn');
      const todayBtn = document.getElementById('todayBtn');

      let selected = null;
      let viewDate = new Date();

      function startOfMonth(d){ return new Date(d.getFullYear(), d.getMonth(), 1); }
      function endOfMonth(d){ return new Date(d.getFullYear(), d.getMonth()+1, 0); }
      function isSameDay(a,b){ return a && b && a.toDateString()===b.toDateString(); }
      function formatDisplay(d){ return d ? d.toLocaleDateString() : 'Select date'; }
      function toISO(d){ return d ? d.toISOString().slice(0,10) : 'none'; }

      function render(){
        daysGrid.innerHTML='';
        const first = startOfMonth(viewDate);
        const last = endOfMonth(viewDate);
        const startDay = first.getDay();
        const totalDays = last.getDate();

        monthYear.textContent = viewDate.toLocaleString(undefined,{month:'long',year:'numeric'});

        for(let i=0;i<startDay;i++){
          const empty=document.createElement('div');
          daysGrid.appendChild(empty);
        }

        for(let day=1;day<=totalDays;day++){
          const date = new Date(viewDate.getFullYear(),viewDate.getMonth(),day);
          const el=document.createElement('div');
          el.className='day';
          el.textContent=day;
          if(isSameDay(date,new Date())) el.classList.add('today');
          if(selected && isSameDay(date,selected)) el.classList.add('selected');
          el.addEventListener('click',()=>{ selected=date; onSelect(); });
          daysGrid.appendChild(el);
        }
      }

      function openPicker(){ picker.style.display='block'; render(); }
      function closePicker(){ picker.style.display='none'; }
      function onSelect(){
        dateText.textContent=formatDisplay(selected);
        isoOut.textContent=toISO(selected);
        closePicker();
      }

      dateInput.addEventListener('click',()=>{ picker.style.display==='block'?closePicker():openPicker(); });
      prevBtn.addEventListener('click',()=>{ viewDate=new Date(viewDate.getFullYear(),viewDate.getMonth()-1,1); render(); });
      nextBtn.addEventListener('click',()=>{ viewDate=new Date(viewDate.getFullYear(),viewDate.getMonth()+1,1); render(); });
      closeBtn.addEventListener('click',closePicker);
      clearBtn.addEventListener('click',()=>{ selected=null; dateText.textContent='Select date'; isoOut.textContent='none'; render(); });
      todayBtn.addEventListener('click',()=>{ selected=new Date(); viewDate=new Date(); onSelect(); });

      document.addEventListener('click',(e)=>{ if(!document.querySelector('.calendar').contains(e.target)) closePicker(); });

      render();
    })();
  </script>
</body>
</html>
